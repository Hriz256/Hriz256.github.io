!function(){"use strict";var u=require("./idGenerator.js");function d(i){if(!isFinite(i))return i;var t=Math.pow(10,this.precision);return Math.round(i*t)/t}function f(i,t){return this.round(i)==this.round(t)}module.exports=function(i,t,s,n){if(this.minify=!1,this.round=d,this.eq=f,this.config=s,this.svgOM=i,this.currentOMNode=i,this.config&&(this.minify=!!this.config.minify,this.styling={class:0,style:1,attribute:2}[s.styling],this.precision=Math.round(this.config.precision),this.config.callback)){this.tagCounter=0;var e=this.nodeCounter=0,o=0,h=0,r=0,c=0,a=[0,0,0,0];this.tick=function(i){switch(i){case"pre":a[0]=7;break;case"tag":e++,a[1]=Math.min(31*e/this.nodeCounter,31);break;case"post":h++,a[2]=Math.min(31*h/this.tagCounter,31);break;case"write":o++,a[3]=Math.min(31*o/this.tagCounter,31);break;case"end":return void this.config.callback(100);case"start":return void this.config.callback(0)}if(r=Math.round(a[0]+a[1]+a[2]+a[3]),c<r&&this.config.callback(c=r))throw"Operation was canceled by user"}}if(isFinite(this.precision)||(this.precision=3),this.prefix=this.config&&this.config.prefix||"",this.indent=this.minify?"":this.config&&"string"==typeof this.config.indentation?this.config.indentation:"  ",this.space=this.minify?"":" ",this.currentIndent="",this.terminator=this.minify?"":this.config&&this.config.carriageReturn?"\r\n":"\n",this.idType=this.minify?"minimal":"regular",this.config&&this.config.idType)switch(this.config.idType){case"regular":case"minimal":case"unique":this.idType=this.config.idType}this.docBounds={left:void 0,top:void 0,right:void 0,bottom:void 0},i.viewSource&&(this.docBounds.left=i.viewSource.x,this.docBounds.top=i.viewSource.y,this.docBounds.right=i.viewSource.x+i.viewSource.width,this.docBounds.bottom=i.viewSource.y+i.viewSource.height),this.pxToInchRatio=i.rasterResolution,this.encoding="utf-8",this.out=[],this.sOut="",this.contentBounds={},this.stream=t,this._x=0,this._y=0,this._width=0,this._height=0,this._viewBox=[],this.errors=n||[],this.ID=new u(this.idType)}}();