!function(){"use strict";var f=require("./utils.js"),i=require("./matrix.js"),n=1/72;module.exports=new function(){var c=this;c.shiftBoundsX=function(e,r){e.left+=r,e.right+=r},c.shiftBoundsY=function(e,r){e.top+=r,e.bottom+=r},c.rectToBounds=function(e){return e.left?e:{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height}},c.write=function(e,r){e.stream?e.stream.write(r):e.sOut+=r},c.writeln=function(e,r){r=null==r?"":r,c.write(e,r+e.terminator)},c.indent=function(e){e.currentIndent+=e.indent},c.undent=function(e){e.currentIndent=e.currentIndent.substr(0,e.currentIndent.length-e.indent.length)},c.componentToHex=function(e){var r=Math.round(e).toString(16);return 1==r.length?"0"+r:r},c.rgbToHex=function(e,r,n){return"#"+c.componentToHex(e)+c.componentToHex(r)+c.componentToHex(n)};var u={"#fa8072":"salmon","#ff0000":"red","#ffc0cb":"pink","#ff7f50":"coral","#ff6347":"tomato","#ffa500":"orange","#ffd700":"gold","#f0e68c":"khaki","#dda0dd":"plum","#ee82ee":"violet","#da70d6":"orchid","#800080":"purple","#4b0082":"indigo","#00ff00":"lime","#008000":"green","#808000":"olive","#008080":"teal","#00ffff":"aqua","#0000ff":"blue","#000080":"navy","#ffe4c4":"bisque","#f5deb3":"wheat","#d2b48c":"tan","#cd853f":"peru","#a0522d":"sienna","#a52a2a":"brown","#800000":"maroon","#fffafa":"snow","#f0ffff":"azure","#f5f5dc":"beige","#fffff0":"ivory","#faf0e6":"linen","#c0c0c0":"silver","#808080":"gray"};function e(o){return function(e,r){var n;if("string"==typeof(e=e||"transparent")&&(n=e),"object"==typeof e){e.ref&&r&&r.svgOM.resources&&r.svgOM.resources.colors&&r.svgOM.resources.colors[e.ref]&&(e=r.svgOM.resources.colors[e.ref]),r||(r={eq:function(e,r){return e==r}});var t=e.value||e;if(!o&&isFinite(e.alpha)&&!r.eq(e.alpha,1))return"rgba("+f.roundUp(t.r)+","+f.roundUp(t.g)+","+f.roundUp(t.b)+","+f.round2(e.alpha)+")";n=c.rgbToHex(t.r,t.g,t.b)}return n=u[n.toLowerCase()]?u[n.toLowerCase()]:n.replace(/^#(.)\1(.)\2(.)\3$/,"#$1$2$3")}}c.writeColor=e(),c.writeColorNoOpacity=e(!0),c.escapeCSS=function(e){for(var r=(e=(e+="").replace(/\s+/g,"-")).length,n=0,t="-"==e.charAt(),o="";n<r;n++){var u=e.charCodeAt(n),f=e.charAt(n),i=f==+f;1<=u&&u<=31||127==u||!n&&i||1==n&&t&&i?o+="\\"+u.toString(16)+" ":127<u||"-"==f||"_"==f||i||/[a-z]/i.test(f)?o+=f:o+="\\"+f}return c.encodedText(o)},c.getTransform=function(e,r,n,t,o){return e?i.writeTransform(e,isFinite(r)?r:0,isFinite(n)?n:0,t):o&&(r||n)?n?"translate("+f.roundP(r||0,t)+" "+f.roundP(n||0,t)+")":"translate("+f.roundP(r,t)+")":""},c.round2=f.round2,c.round1k=f.round1k,c.round10k=f.round10k,c.roundUp=f.roundUp,c.roundDown=f.roundDown,c.toDocumentUnits=function(e,r){if(!e.config||!e.config.documentUnits)return r;switch(e.config.documentUnits){case"mm":r*=.35277777777777775;break;case"cm":r*=.035277777777777776;break;case"in":r*=n;break;case"pc":r*=.08333333333333333;break;default:return r}return r+e.config.documentUnits},c.toString=function(e){return e.sOut},c.encodedText=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/[^\u0009\u000A\u000D\u0020-\uDBFF\uDC00-\uDFFF\uE000-\uFFFD\u10000-\u10FFFF]/g,"")},c.hasFx=function(e){return e.currentOMNode.style&&e.currentOMNode.style.filters},c.hasGlobalFx=function(e){return e.currentOMNode.style&&e.currentOMNode.style.filters&&e.currentOMNode.style.filters.length&&e.currentOMNode.style.filters[0].global}}}();