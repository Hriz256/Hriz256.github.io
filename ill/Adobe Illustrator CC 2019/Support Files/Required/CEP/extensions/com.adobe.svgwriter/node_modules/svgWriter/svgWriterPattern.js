!function(){"use strict";var h=require("./svgWriterTag.js");module.exports={writePattern:function(t,e,r){var i,n,s,o,a,d=t.currentOMNode,u=d.shifted?(t._shiftContentX||0)+(t._shiftCropRectX||0):0,f=d.shifted?(t._shiftContentY||0)+(t._shiftCropRectY||0):0;e.ref&&t.svgOM.resources&&t.svgOM.resources.patterns[e.ref]&&(t.currentOMNode=t.svgOM.resources.patterns[e.ref],t.currentOMNode.transform=e.transform,t.currentOMNode.transformTX=u,t.currentOMNode.transformTY=f,s=t.currentOMNode.name,i=t.ID.getUnique("pattern",s),n=h.make(t),t.currentOMNode=d,n.setAttribute("id",i),!t.minify&&s&&i!=s&&n.setAttribute("data-name",s),t.omStylesheet.def(n,function(e){t.omStylesheet.getStyleBlock(d).addRule(r,"url(#"+t.prefix+e.getAttribute("id")+")")})),"string"==typeof e.href&&(i=t.ID.getUnique("pattern"),o=parseFloat(e.width),a=parseFloat(e.height),(n=new h("pattern",{id:i,width:"100%",height:"100%",patternContentUnits:"userSpaceOnUse",preserveAspectRatio:"xMidYMid slice",viewBox:[0,0,o,a]})).appendChild(new h("image",{"xlink:href":e.href,width:o,height:a})),t.omStylesheet.def(n,function(e){t.omStylesheet.getStyleBlock(d).addRule(r,"url(#"+t.prefix+e.getAttribute("id")+")")}))}}}();