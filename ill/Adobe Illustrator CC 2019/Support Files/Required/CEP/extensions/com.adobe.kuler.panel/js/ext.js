var debug=!0,csInterface=new CSInterface,imsInterface=new IMSInterface,appId=csInterface.getApplicationID();function onLoaded(){var e=csInterface.initResourceBundle(),n=csInterface.getSystemPath("userData")+"/kulerdata.json";console.log(" path is "+n);var o=window.cep.fs.readFile(n);0==o.err&&(console.log(JSON.parse(o.data)),o=JSON.parse(o.data)),o.localCacheAvailable?(console.log("local cache available"),window.navigator.onLine||csInterface.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT,resetUIColors),window.location="https://kuler.adobe.com/"):(console.log("cache not available"),csInterface.hostEnvironment.isAppOnline?window.navigator.onLine?window.location="https://kuler.adobe.com/":(resetUIColors(),$(".message").css("margin","15px"),csInterface.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT,resetUIColors),$(".message")[0].innerHTML=e.internetNotConnected):($(".message").css("margin","15px"),resetUIColors(),csInterface.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT,resetUIColors),debug&&console.log("App is Not online. Please allow from preferences menu."),window.navigator.onLine?($(".message").html(e.extensionNotAllowedInternet),$(".open-preference").html(e.pluginPreferences).css({display:"block"}).mousedown(function(){$(this).addClass("selected")}).mouseup(function(){$(this).removeClass("selected")}),$(".retry").html(e.retry).css({display:"block"}).mousedown(function(){$(this).addClass("selected")}).mouseup(function(){$(this).removeClass("selected")}),"PHXS"==appId&&($(".open-preference").click(openPreferences),$(".retry").click(retry))):$(".message").html(e.internetNotConnected)))}function retry(){onLoaded()}function openPreferenceScript(){var e=charIDToTypeID("Mn  "),n=charIDToTypeID("MnIt"),o=charIDToTypeID("PlgS"),t=charIDToTypeID("null"),r=charIDToTypeID("slct"),a=new ActionDescriptor,c=new ActionReference;c.putEnumerated(e,n,o),a.putReference(t,c);executeAction(r,a,DialogModes.ALL)}function openPreferences(){csInterface.evalScript("var f = "+openPreferenceScript.toString()+"; f();",function(e){})}function resetUIColors(){var e=csInterface.getHostEnvironment().appSkinInfo;e&&(panelBgColor=parseInt(toHex(e.panelBackgroundColor.color),16),$("html").removeClass("light1 light2 dark1 dark2"),8947848<panelBgColor?13421772<panelBgColor?$("html").addClass("light1"):$("html").addClass("light2"):4473924<panelBgColor?$("html").addClass("dark1"):$("html").addClass("dark2"))}function toHex(color,delta){function computeValue(e,n){var o=isNaN(n)?e:e+n;return o<0?o=0:255<o&&(o=255),1==(o=o.toString(16)).length?"0"+o:o}var hex="";if(color)with(color)hex=computeValue(red,delta)+computeValue(green,delta)+computeValue(blue,delta);return"0x"+hex}